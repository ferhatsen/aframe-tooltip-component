!function(t){function e(a){if(i[a])return i[a].exports;var r=i[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){if(i(1),i(2),"undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("tooltip",{schema:{text:{default:""},width:{default:1,min:0},height:{default:1,min:0},lineHorizontalAlign:{default:"left",oneOf:["left","right","center"]},lineVerticalAlign:{default:"center",oneOf:["top","bottom","center"]},targetPosition:{type:"vec3",if:{targetType:["position"]}}},init:function(){var t=this.el,e=this.data,i=this.line=document.createElement("a-entity");i.setAttribute("line",{start:"0 0 0",end:"-2 -1 -3"}),t.appendChild(i);var a=this.quad=document.createElement("a-entity");a.setAttribute("slice9",{width:e.width,height:e.height,left:20,right:43,top:20,bottom:43,padding:.02,src:"tooltip.png"}),a.setAttribute("text",{width:.9,color:"#fff",value:e.text,align:"center"}),t.appendChild(a)},update:function(t){var e=this.data,i={top:e.height/2,bottom:-e.height/2,center:0},a={left:-e.width/2,right:e.width/2,center:0},r=i[e.lineVerticalAlign],n=a[e.lineHorizontalAlign],o=e.endPosition;this.line.setAttribute("line",{start:{x:n,y:r,z:0},end:o})}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("line",{schema:{start:{type:"vec3",default:"0 0 0"},end:{type:"vec3",default:"0 0 0"},color:{type:"color",default:"#fff"}},init:function(){var t=this.material=new THREE.LineBasicMaterial({color:this.data.color}),e=this.geometry=new THREE.BufferGeometry;e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(e,t),this.el.setObject3D("line",this.line)},update:function(t){var e=this.data,i=AFRAME.utils.diff(e,t);if("start"in i||"end"in i){var a=this.geometry.attributes.position.array;a[0]=e.start.x,a[1]=e.start.y,a[2]=e.start.z,a[3]=e.end.x,a[4]=e.end.y,a[5]=e.end.z,this.geometry.attributes.position.needsUpdate=!0}this.material.color.setStyle(e.color)}})},function(t,e){function i(t){switch(t){case"back":return THREE.BackSide;case"double":return THREE.DoubleSide;default:return THREE.FrontSide}}if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("slice9",{schema:{width:{default:1,min:0},height:{default:1,min:0},left:{default:0,min:0},right:{default:0,min:0},bottom:{default:0,min:0},top:{default:0,min:0},side:{default:"front",oneOf:["front","back","double"]},padding:{default:.1,min:.01},color:{type:"color",default:"#fff"},opacity:{default:1,min:0,max:1},transparent:{default:!0},debug:{default:!1},src:{type:"map"}},multiple:!1,init:function(){var t=this.data,e=this.material=new THREE.MeshBasicMaterial({color:t.color,opacity:t.opacity,transparent:t.transparent,wireframe:t.debug}),i=this.geometry=new THREE.PlaneBufferGeometry(t.width,t.height,3,3);new THREE.TextureLoader;this.plane=new THREE.Mesh(i,e),this.el.setObject3D("mesh",this.plane),this.textureSrc=null},updateMap:function(){function t(t){this.material.map=t,this.material.needsUpdate=!0,this.regenerateMesh()}var e=this.data.src;if(e){if(e===this.textureSrc)return;return this.textureSrc=e,void this.el.sceneEl.systems.material.loadTexture(e,{src:e},t.bind(this))}this.material.map&&t(null)},regenerateMesh:function(){function t(t,e,i){a[3*t]=e,a[3*t+1]=i}function e(t,e,i){r[2*t]=e,r[2*t+1]=i}var i=this.data,a=this.geometry.attributes.position.array,r=this.geometry.attributes.uv.array,n=this.material.map.image;if(n){var o={left:i.left/n.width,right:i.right/n.width,top:i.top/n.height,bottom:i.bottom/n.height};e(1,o.left,1),e(2,o.right,1),e(4,0,o.bottom),e(5,o.left,o.bottom),e(6,o.right,o.bottom),e(7,1,o.bottom),e(8,0,o.top),e(9,o.left,o.top),e(10,o.right,o.top),e(11,1,o.top),e(13,o.left,0),e(14,o.right,0);var s=i.width/2,l=i.height/2,d=-s+i.padding,h=s-i.padding,f=l-i.padding,u=-l+i.padding;t(0,-s,l),t(1,d,l),t(2,h,l),t(3,s,l),t(4,-s,f),t(5,d,f),t(6,h,f),t(7,s,f),t(8,-s,u),t(9,d,u),t(10,h,u),t(11,s,u),t(13,d,-l),t(14,h,-l),t(12,-s,-l),t(15,s,-l),this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.uv.needsUpdate=!0}},update:function(t){var e=this.data;this.material.color.setStyle(e.color),this.material.opacity=e.opacity,this.material.transparent=e.transparent,this.material.wireframe=e.debug,this.material.side=i(e.side);var a=AFRAME.utils.diff(e,t);"src"in a?this.updateMap():("width"in a||"height"in a||"padding"in a||"left"in a||"top"in a||"bottom"in a||"right"in a)&&this.regenerateMesh()},remove:function(){},pause:function(){},play:function(){}})}]);